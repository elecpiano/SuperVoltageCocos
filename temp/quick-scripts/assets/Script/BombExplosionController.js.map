{"version":3,"sources":["BombExplosionController.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAqD,2CAAY;IADjE;QAAA,qEA2DC;QAvDG,gBAAU,GAAc,IAAI,CAAC;QAG7B,gBAAU,GAAc,IAAI,CAAC;QAG7B,oBAAc,GAAmB,IAAI,CAAC;QAqBtC,iBAAW,GAAW,CAAC,CAAC;QACxB,sBAAgB,GAAU,GAAG,CAAC;QAC9B,yBAAmB,GAAW,IAAI,CAAC;QACnC,oCAAoC;QACpC,cAAQ,GAAY,KAAK,CAAC;;IAwB9B,CAAC;IA/CG,wCAAM,GAAN;QACI,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;IACpC,CAAC;IAED,sCAAI,GAAJ,UAAK,IAAoB;QACrB,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC3D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC;QAE3D,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IAC/B,CAAC;IAOD,uCAAK,GAAL;QAAA,iBAeC;QAdG,IAAI,IAAI,CAAC,QAAQ,EAAE;YACf,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC;YACpE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,YAAY,CACb;gBACI,KAAI,CAAC,KAAK,EAAE,CAAC;YACjB,CAAC,EAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SACnC;QACD,QAAQ;QACR,4BAA4B;QAC5B,mBAAmB;QACnB,IAAI;IACR,CAAC;IAED,sCAAI,GAAJ;QACI,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;IACpC,CAAC;IArDD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+DACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+DACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;mEACa;IATrB,uBAAuB;QAD3C,OAAO;OACa,uBAAuB,CA0D3C;IAAD,8BAAC;CA1DD,AA0DC,CA1DoD,EAAE,CAAC,SAAS,GA0DhE;kBA1DoB,uBAAuB","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import CellController from \"./CellController\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BombExplosionController extends cc.Component {\n\n    @property(cc.Sprite)\n    ExplosionH: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    ExplosionV: cc.Sprite = null;\n\n    @property(cc.AudioSource)\n    ExplosionAudio: cc.AudioSource = null;\n\n    onLoad () {\n        this.ExplosionH.enabled = false;\n        this.ExplosionV.enabled = false;\n    }\n\n    Show(cell: CellController){\n        console.log(\"xxx - BombExplosion.Show \");\n        this.ExplosionH.enabled = true;\n        this.ExplosionV.enabled = true;\n        this.ExplosionH.node.setPosition(320,cell.node.position.y);\n        this.ExplosionV.node.setPosition(cell.node.position.x,480);\n        \n        this.flash_count = 0;\n        this.flashing = true;\n        this.flash();\n\n        this.ExplosionAudio.play();\n    }\n\n    flash_count: number = 0;\n    BOMB_FLASH_SCALE:number = 0.9;\n    BOMB_FLASH_INTERVAL: number = 0.05;\n    // BOMB_FLASH_COUNT_MAX:number = 10;\n    flashing: boolean = false;\n    flash(){\n        if (this.flashing) {\n            this.flash_count++;\n            let scale = (this.flash_count % 2) == 0 ? 1 : this.BOMB_FLASH_SCALE;\n            this.ExplosionH.node.scaleY = scale;\n            this.ExplosionV.node.scaleX = scale;\n            this.scheduleOnce(\n                ()=>{\n                    this.flash();\n                },this.BOMB_FLASH_INTERVAL);\n        }\n        // else{\n        //     this.flash_count = 0;\n        //     this.Hide();\n        // }\n    }\n\n    Hide(){\n        this.flashing = false;\n        this.ExplosionH.enabled = false;\n        this.ExplosionV.enabled = false;\n    }\n\n}\n"]}